{"ast":null,"code":"import _regeneratorRuntime from\"/Users/padkas2001gmail.com/Desktop/isis/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/padkas2001gmail.com/Desktop/isis/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/padkas2001gmail.com/Desktop/isis/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Container,Row,Col,Card,Button,Alert}from'react-bootstrap';import{useCart}from'../CartContext/CartContext';import'./Catalog.css';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Catalog(){var _useCart=useCart(),addToCart=_useCart.addToCart;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),addedToCart=_useState4[0],setAddedToCart=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){var fetchProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/Product');case 3:response=_context.sent;if(response.ok){_context.next=6;break;}throw new Error(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 HTTP, \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441: \".concat(response.status));case 6:_context.next=8;return response.json();case 8:data=_context.sent;setProducts(data);_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.error('Ошибка при получении данных:',_context.t0);setError(_context.t0.message);case 16:case\"end\":return _context.stop();}},_callee,null,[[0,12]]);}));return function fetchProducts(){return _ref.apply(this,arguments);};}();fetchProducts();},[]);var handleAddToCart=function handleAddToCart(product){addToCart(product);setAddedToCart(true);setTimeout(function(){return setAddedToCart(false);},2000);};if(error){return/*#__PURE__*/_jsxs(Alert,{variant:\"danger\",children:[\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \",error]});}return/*#__PURE__*/_jsxs(Container,{className:\"catalog-container my-5\",children:[addedToCart&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:\"\\u0422\\u043E\\u0432\\u0430\\u0440 \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443!\"}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xs:12,className:\"text-center mb-4\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"})})}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:products.map(function(product){return/*#__PURE__*/_jsx(Col,{xs:12,sm:6,md:4,lg:3,className:\"mb-4 d-flex align-items-stretch\",children:/*#__PURE__*/_jsxs(Card,{className:\"product-card\",children:[/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",src:product.image,alt:product.title}),/*#__PURE__*/_jsxs(Card.Body,{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(Card.Title,{children:product.title}),/*#__PURE__*/_jsx(Card.Text,{className:\"mt-auto\",children:\"\".concat(product.price,\" \\u0420\")}),/*#__PURE__*/_jsx(Button,{variant:\"success\",className:\"mt-auto\",onClick:function onClick(){return handleAddToCart(product);},children:\"\\u041A\\u0443\\u043F\\u0438\\u0442\\u044C\"})]})]})},product.id);})})]});}export default Catalog;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Button","Alert","useCart","jsxs","_jsxs","jsx","_jsx","Catalog","_useCart","addToCart","_useState","_useState2","_slicedToArray","products","setProducts","_useState3","_useState4","addedToCart","setAddedToCart","_useState5","_useState6","error","setError","fetchProducts","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","sent","ok","Error","concat","status","json","t0","console","message","stop","apply","arguments","handleAddToCart","product","setTimeout","variant","children","className","xs","map","sm","md","lg","Img","src","image","alt","title","Body","Title","Text","price","onClick","id"],"sources":["/Users/padkas2001gmail.com/Desktop/isis/src/components/Catalog/Catalog.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Card, Button, Alert } from 'react-bootstrap';\nimport { useCart } from '../CartContext/CartContext';\nimport './Catalog.css';\n\nfunction Catalog() {\n    const { addToCart } = useCart();\n    const [products, setProducts] = useState([]);\n    const [addedToCart, setAddedToCart] = useState(false);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        const fetchProducts = async () => {\n            try {\n                const response = await fetch('/Product');\n                if (!response.ok) {\n                    throw new Error(`Ошибка HTTP, статус: ${response.status}`);\n                }\n                const data = await response.json();\n                setProducts(data);\n            } catch (error) {\n                console.error('Ошибка при получении данных:', error);\n                setError(error.message);\n            }\n        };\n\n        fetchProducts();\n    }, []);\n\n    const handleAddToCart = product => {\n        addToCart(product);\n        setAddedToCart(true);\n        setTimeout(() => setAddedToCart(false), 2000);\n    };\n\n    if (error) {\n        return <Alert variant=\"danger\">Ошибка: {error}</Alert>;\n    }\n\n    return (\n        <Container className=\"catalog-container my-5\">\n            {addedToCart && <Alert variant=\"success\">Товар добавлен в корзину!</Alert>}\n            <Row>\n                <Col xs={12} className=\"text-center mb-4\">\n                    <h2>Каталог товаров</h2>\n                </Col>\n            </Row>\n            <Row className=\"justify-content-center\">\n                {products.map(product => (\n                    <Col key={product.id} xs={12} sm={6} md={4} lg={3} className=\"mb-4 d-flex align-items-stretch\">\n                        <Card className=\"product-card\">\n                            <Card.Img variant=\"top\" src={product.image} alt={product.title} />\n                            <Card.Body className=\"d-flex flex-column\">\n                                <Card.Title>{product.title}</Card.Title>\n                                <Card.Text className=\"mt-auto\">\n                                    {`${product.price} Р`}\n                                </Card.Text>\n                                <Button variant=\"success\" className=\"mt-auto\" onClick={() => handleAddToCart(product)}>\n                                    Купить\n                                </Button>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                ))}\n            </Row>\n\n        </Container>\n    );\n}\n\nexport default Catalog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}