{"ast":null,"code":"var _jsxFileName = \"/Users/padkas2001gmail.com/Desktop/isis/src/components/UserProfile/AdminPanel.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../AuthContext/AuthContext';\nimport './AdminPanel.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminPanel = () => {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const {\n    token\n  } = useAuth();\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const response = await fetch('/api/users', {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (!response.ok) throw new Error('Failed to fetch users');\n        const data = await response.json();\n        setUsers(data);\n        setLoading(false);\n      } catch (err) {\n        setError(`Error: ${err.message}`);\n        setLoading(false);\n      }\n    };\n    if (token) {\n      fetchUsers();\n    }\n  }, [token]);\n  const handleUserAction = async (userId, action, newRole = null) => {\n    let url = `http://localhost:3001/api/users/${userId}`;\n    let options = {\n      method: 'DELETE',\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    };\n    if (action === 'changeRole') {\n      url += `/role`;\n      options = {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          role: newRole\n        })\n      };\n    }\n    try {\n      const response = await fetch(url, options);\n      if (!response.ok) throw new Error(`Failed to ${action} user`);\n      action === 'delete' ? setUsers(users.filter(user => user.id !== userId)) : setUsers(users.map(user => user.id === userId ? {\n        ...user,\n        role: newRole\n      } : user));\n    } catch (err) {\n      setError(`Error: ${err.message}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"User Management\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading users...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"users-list\",\n      children: users.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [user.username, \" (\", user.email, \") - Role: \", user.role]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleUserAction(user.id, 'delete'),\n          children: \"Delete User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleUserAction(user.id, 'changeRole', user.role === 'admin' ? 'user' : 'admin'),\n          children: [\"Change Role to \", user.role === 'admin' ? 'User' : 'Admin']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, user.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminPanel, \"In5SNuU7SCmuBs159seQfHM4hjI=\", false, function () {\n  return [useAuth];\n});\n_c = AdminPanel;\nexport default AdminPanel;\nvar _c;\n$RefreshReg$(_c, \"AdminPanel\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","jsxDEV","_jsxDEV","AdminPanel","_s","users","setUsers","loading","setLoading","error","setError","token","fetchUsers","response","fetch","headers","ok","Error","data","json","err","message","handleUserAction","userId","action","newRole","url","options","method","body","JSON","stringify","role","filter","user","id","map","className","children","fileName","_jsxFileName","lineNumber","columnNumber","username","email","onClick","_c","$RefreshReg$"],"sources":["/Users/padkas2001gmail.com/Desktop/isis/src/components/UserProfile/AdminPanel.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../AuthContext/AuthContext';\nimport './AdminPanel.css';\n\nconst AdminPanel = () => {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  const { token } = useAuth();\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const response = await fetch('/api/users', {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n        if (!response.ok) throw new Error('Failed to fetch users');\n        const data = await response.json();\n        setUsers(data);\n        setLoading(false);\n      } catch (err) {\n        setError(`Error: ${err.message}`);\n        setLoading(false);\n      }\n    };\n\n    if (token) {\n      fetchUsers();\n    }\n  }, [token]);\n\n  const handleUserAction = async (userId, action, newRole = null) => {\n    let url = `http://localhost:3001/api/users/${userId}`;\n    let options = {\n      method: 'DELETE',\n      headers: { 'Authorization': `Bearer ${token}` },\n    };\n\n    if (action === 'changeRole') {\n      url += `/role`;\n      options = {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ role: newRole }),\n      };\n    }\n\n    try {\n      const response = await fetch(url, options);\n      if (!response.ok) throw new Error(`Failed to ${action} user`);\n      action === 'delete' \n        ? setUsers(users.filter(user => user.id !== userId))\n        : setUsers(users.map(user => user.id === userId ? { ...user, role: newRole } : user));\n    } catch (err) {\n      setError(`Error: ${err.message}`);\n    }\n  };\n\n  return (\n    <div className=\"admin-panel\">\n      <h2>User Management</h2>\n      {loading && <p>Loading users...</p>}\n      {error && <p className=\"error\">{error}</p>}\n      <div className=\"users-list\">\n        {users.map(user => (\n          <div key={user.id} className=\"user-item\">\n            <p>{user.username} ({user.email}) - Role: {user.role}</p>\n            <button onClick={() => handleUserAction(user.id, 'delete')}>Delete User</button>\n            <button onClick={() => handleUserAction(user.id, 'changeRole', user.role === 'admin' ? 'user' : 'admin')}>\n              Change Role to {user.role === 'admin' ? 'User' : 'Admin'}\n            </button>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminPanel;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}