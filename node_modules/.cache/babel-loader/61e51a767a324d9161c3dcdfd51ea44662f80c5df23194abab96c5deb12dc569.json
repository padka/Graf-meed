{"ast":null,"code":"import _regeneratorRuntime from\"/Users/padkas2001gmail.com/Desktop/isis/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/padkas2001gmail.com/Desktop/isis/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/padkas2001gmail.com/Desktop/isis/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// AuthContext.js\nimport React,{createContext,useContext,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/createContext(null);export var useAuth=function useAuth(){return useContext(AuthContext);};export var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(username,password){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.prev=2;_context.next=5;return fakeLoginApi(username,password);case 5:response=_context.sent;setUser({name:username,role:response.role});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);setError('Ошибка входа');case 12:_context.prev=12;setIsLoading(false);return _context.finish(12);case 15:case\"end\":return _context.stop();}},_callee,null,[[2,9,12,15]]);}));return function login(_x,_x2){return _ref2.apply(this,arguments);};}();var logout=function logout(){setUser(null);// Здесь также можно удалить сохраненный токен из localStorage/sessionStorage\n};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user:user,isLoading:isLoading,error:error,login:login,logout:logout},children:children});};// Это просто пример функции, в реальном приложении её нужно заменить на запрос к API\nvar fakeLoginApi=function fakeLoginApi(username,password){return new Promise(function(resolve,reject){setTimeout(function(){if(username==='admin'){resolve({role:'admin'});}else if(username==='user'){resolve({role:'user'});}else{reject('User not found');}},1000);});};export default AuthProvider;","map":{"version":3,"names":["React","createContext","useContext","useState","jsx","_jsx","AuthContext","useAuth","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","isLoading","setIsLoading","_useState5","_useState6","error","setError","login","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","username","password","response","wrap","_callee$","_context","prev","next","fakeLoginApi","sent","name","role","t0","finish","stop","_x","_x2","apply","arguments","logout","Provider","value","Promise","resolve","reject","setTimeout"],"sources":["/Users/padkas2001gmail.com/Desktop/isis/src/components/AuthContext/AuthContext.js"],"sourcesContent":["// AuthContext.js\nimport React, { createContext, useContext, useState } from 'react';\n\nconst AuthContext = createContext(null);\n\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const login = async (username, password) => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await fakeLoginApi(username, password);\n      setUser({ name: username, role: response.role });\n    } catch (error) {\n      setError('Ошибка входа');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const logout = () => {\n    setUser(null);\n    // Здесь также можно удалить сохраненный токен из localStorage/sessionStorage\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, isLoading, error, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\n// Это просто пример функции, в реальном приложении её нужно заменить на запрос к API\nconst fakeLoginApi = (username, password) => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (username === 'admin') {\n        resolve({ role: 'admin' });\n      } else if (username === 'user') {\n        resolve({ role: 'user' });\n      } else {\n        reject('User not found');\n      }\n    }, 1000);\n  });\n};\n\nexport default AuthProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}