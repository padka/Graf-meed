{"ast":null,"code":"import _slicedToArray from\"/Users/padkas2001gmail.com/Desktop/isis/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Container,Row,Col,Card,Button,Alert}from'react-bootstrap';import{useCart}from'../CartContext/CartContext';import'./Catalog.css';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Catalog(){var _useCart=useCart(),addToCart=_useCart.addToCart;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),addedToCart=_useState4[0],setAddedToCart=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){fetch('/api/products').then(function(response){if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}return response.json();}).then(function(data){return setProducts(data);}).catch(function(error){console.error('Error fetching data:',error);setError(error.message);});},[]);var handleAddToCart=function handleAddToCart(product){addToCart(product);setAddedToCart(true);setTimeout(function(){return setAddedToCart(false);},2000);};if(error){return/*#__PURE__*/_jsxs(Alert,{variant:\"danger\",children:[\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \",error]});}return/*#__PURE__*/_jsxs(Container,{className:\"catalog-container my-5\",children:[addedToCart&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:\"\\u0422\\u043E\\u0432\\u0430\\u0440 \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443!\"}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xs:12,className:\"text-center mb-4\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"})})}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:products.map(function(product){return/*#__PURE__*/_jsx(Col,{xs:12,sm:6,md:4,lg:3,className:\"mb-4 d-flex align-items-stretch\",children:/*#__PURE__*/_jsxs(Card,{className:\"product-card\",children:[/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",src:product.image,alt:product.title}),/*#__PURE__*/_jsxs(Card.Body,{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(Card.Title,{children:product.title}),/*#__PURE__*/_jsx(Card.Text,{className:\"mt-auto\",children:\"\".concat(product.price,\" \\u0420\")}),/*#__PURE__*/_jsx(Button,{variant:\"success\",className:\"mt-auto\",onClick:function onClick(){return handleAddToCart(product);},children:\"\\u041A\\u0443\\u043F\\u0438\\u0442\\u044C\"})]})]})},product.id);})})]});}export default Catalog;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Button","Alert","useCart","jsxs","_jsxs","jsx","_jsx","Catalog","_useCart","addToCart","_useState","_useState2","_slicedToArray","products","setProducts","_useState3","_useState4","addedToCart","setAddedToCart","_useState5","_useState6","error","setError","fetch","then","response","ok","Error","concat","status","json","data","catch","console","message","handleAddToCart","product","setTimeout","variant","children","className","xs","map","sm","md","lg","Img","src","image","alt","title","Body","Title","Text","price","onClick","id"],"sources":["/Users/padkas2001gmail.com/Desktop/isis/src/components/Catalog/Catalog.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Card, Button, Alert } from 'react-bootstrap';\nimport { useCart } from '../CartContext/CartContext';\nimport './Catalog.css';\n\nfunction Catalog() {\n    const { addToCart } = useCart();\n    const [products, setProducts] = useState([]);\n    const [addedToCart, setAddedToCart] = useState(false);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        fetch('/api/products')\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n                return response.json();\n            })\n            .then(data => setProducts(data))\n            .catch(error => {\n                console.error('Error fetching data:', error);\n                setError(error.message);\n            });\n    }, []);\n\n    const handleAddToCart = product => {\n        addToCart(product);\n        setAddedToCart(true);\n        setTimeout(() => setAddedToCart(false), 2000);\n    };\n\n    if (error) {\n        return <Alert variant=\"danger\">Ошибка: {error}</Alert>;\n    }\n\n    return (\n        <Container className=\"catalog-container my-5\">\n            {addedToCart && <Alert variant=\"success\">Товар добавлен в корзину!</Alert>}\n            <Row>\n                <Col xs={12} className=\"text-center mb-4\">\n                    <h2>Каталог товаров</h2>\n                </Col>\n            </Row>\n            <Row className=\"justify-content-center\">\n                {products.map(product => (\n                    <Col key={product.id} xs={12} sm={6} md={4} lg={3} className=\"mb-4 d-flex align-items-stretch\">\n                        <Card className=\"product-card\">\n                            <Card.Img variant=\"top\" src={product.image} alt={product.title} />\n                            <Card.Body className=\"d-flex flex-column\">\n                                <Card.Title>{product.title}</Card.Title>\n                                <Card.Text className=\"mt-auto\">\n                                    {`${product.price} Р`}\n                                </Card.Text>\n                                <Button variant=\"success\" className=\"mt-auto\" onClick={() => handleAddToCart(product)}>\n                                    Купить\n                                </Button>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                ))}\n            </Row>\n        </Container>\n    );\n}\n\nexport default Catalog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}