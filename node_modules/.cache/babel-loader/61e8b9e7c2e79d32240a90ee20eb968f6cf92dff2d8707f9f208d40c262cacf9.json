{"ast":null,"code":"var _jsxFileName = \"/Users/padkas2001gmail.com/Desktop/isis/src/components/UserProfile/AdminPanel.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../AuthContext/AuthContext'; // Assuming this provides auth functions and user state\nimport './AdminPanel.css'; // Styling for the admin panel\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminPanel = () => {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const {\n    token\n  } = useAuth(); // Assuming useAuth provides a token\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const response = await fetch('/api/users', {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (!response.ok) throw new Error('Failed to fetch users');\n        const data = await response.json();\n        setUsers(data);\n        setLoading(false);\n      } catch (err) {\n        setError(`Error: ${err.message}`);\n        setLoading(false);\n      }\n    };\n    fetchUsers();\n  }, [token]); // Dependency array ensures this effect runs once token changes\n\n  const deleteUser = async userId => {\n    try {\n      const response = await fetch(`/api/users/${userId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (!response.ok) throw new Error('Failed to delete user');\n      setUsers(users.filter(user => user.id !== userId)); // Update UI optimistically\n    } catch (err) {\n      setError(`Error: ${err.message}`);\n    }\n  };\n  const changeUserRole = async (userId, newRole) => {\n    try {\n      const response = await fetch(`/api/users/${userId}/role`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          role: newRole\n        })\n      });\n      if (!response.ok) throw new Error('Failed to change user role');\n      setUsers(users.map(user => user.id === userId ? {\n        ...user,\n        role: newRole\n      } : user)); // Update UI optimistically\n    } catch (err) {\n      setError(`Error: ${err.message}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"User Management\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading users...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"users-list\",\n      children: users.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [user.username, \" (\", user.email, \") - Role: \", user.role]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => deleteUser(user.id),\n          children: \"Delete User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => changeUserRole(user.id, user.role === 'admin' ? 'user' : 'admin'),\n          children: [\"Change Role to \", user.role === 'admin' ? 'User' : 'Admin']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, user.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminPanel, \"In5SNuU7SCmuBs159seQfHM4hjI=\", false, function () {\n  return [useAuth];\n});\n_c = AdminPanel;\nexport default AdminPanel;\nvar _c;\n$RefreshReg$(_c, \"AdminPanel\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","jsxDEV","_jsxDEV","AdminPanel","_s","users","setUsers","loading","setLoading","error","setError","token","fetchUsers","response","fetch","headers","ok","Error","data","json","err","message","deleteUser","userId","method","filter","user","id","changeUserRole","newRole","body","JSON","stringify","role","map","className","children","fileName","_jsxFileName","lineNumber","columnNumber","username","email","onClick","_c","$RefreshReg$"],"sources":["/Users/padkas2001gmail.com/Desktop/isis/src/components/UserProfile/AdminPanel.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../AuthContext/AuthContext'; // Assuming this provides auth functions and user state\nimport './AdminPanel.css'; // Styling for the admin panel\n\nconst AdminPanel = () => {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  const { token } = useAuth(); // Assuming useAuth provides a token\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const response = await fetch('/api/users', {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n        if (!response.ok) throw new Error('Failed to fetch users');\n        const data = await response.json();\n        setUsers(data);\n        setLoading(false);\n      } catch (err) {\n        setError(`Error: ${err.message}`);\n        setLoading(false);\n      }\n    };\n\n    fetchUsers();\n  }, [token]); // Dependency array ensures this effect runs once token changes\n\n  const deleteUser = async (userId) => {\n    try {\n      const response = await fetch(`/api/users/${userId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n      if (!response.ok) throw new Error('Failed to delete user');\n      setUsers(users.filter(user => user.id !== userId)); // Update UI optimistically\n    } catch (err) {\n      setError(`Error: ${err.message}`);\n    }\n  };\n\n  const changeUserRole = async (userId, newRole) => {\n    try {\n      const response = await fetch(`/api/users/${userId}/role`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ role: newRole }),\n      });\n      if (!response.ok) throw new Error('Failed to change user role');\n      setUsers(users.map(user => user.id === userId ? { ...user, role: newRole } : user)); // Update UI optimistically\n    } catch (err) {\n      setError(`Error: ${err.message}`);\n    }\n  };\n\n  return (\n    <div className=\"admin-panel\">\n      <h2>User Management</h2>\n      {loading && <p>Loading users...</p>}\n      {error && <p className=\"error\">{error}</p>}\n      <div className=\"users-list\">\n        {users.map(user => (\n          <div key={user.id} className=\"user-item\">\n            <p>{user.username} ({user.email}) - Role: {user.role}</p>\n            <button onClick={() => deleteUser(user.id)}>Delete User</button>\n            <button onClick={() => changeUserRole(user.id, user.role === 'admin' ? 'user' : 'admin')}>\n              Change Role to {user.role === 'admin' ? 'User' : 'Admin'}\n            </button>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminPanel;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}